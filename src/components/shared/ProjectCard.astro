---
interface Props {
  title: string;
  description: string;
  href: string;
  image?: string;
  category?: string;
  className?: string;
  variant?: "default" | "redwhite";
}

const { title, description, href, image, category, className = "", variant = "default" } = Astro.props;

// Handle base path for GitHub Pages compatibility and theme routing
const basePath = import.meta.env.BASE_URL || "";
const themePath = variant === 'redwhite' ? 'redwhite/' : '';
const finalHref = href.startsWith('/') ? `${basePath}${themePath}${href.slice(1)}` : href;

// Theme-aware classes that respond to system theme
const cardClasses = "group block p-6 bg-white dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800 rounded-lg hover:border-red-600/50 transition-all hover:shadow-lg dark:hover:bg-zinc-800/50";

const categoryClasses = "inline-block px-3 py-1 mb-3 text-xs font-semibold text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 rounded-full";

const titleClasses = "text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors";

const descriptionClasses = "text-gray-600 dark:text-zinc-400 line-clamp-3";

const linkClasses = "mt-4 flex items-center text-red-600 dark:text-red-400 group-hover:text-red-700 dark:group-hover:text-red-300";
---

<a
  href={finalHref}
  class={`${cardClasses} ${className}`}
>
  {image && (
    <div class="mb-4 overflow-hidden rounded-lg">
      <img
        src={image}
        alt={title}
        class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
      />
    </div>
  )}

  {category && (
    <span class={categoryClasses}>
      {category}
    </span>
  )}

  <h3 class={titleClasses}>
    {title}
  </h3>

  <p class={descriptionClasses}>
    {description}
  </p>

  <div class={linkClasses}>
    <span class="text-sm font-medium">Learn more</span>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="0 0 24 24"
      class="ml-1 group-hover:translate-x-1 transition-transform"
    >
      <path
        fill="currentColor"
        d="M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2l10 10z"
      />
    </svg>
  </div>
</a>