---
interface Props {
  title: string;
  description: string;
  href: string;
  image?: string;
  category?: string;
  className?: string;
  variant?: "default" | "redwhite";
}

const { title, description, href, image, category, className = "", variant = "default" } = Astro.props;

// Handle base path for GitHub Pages compatibility and theme routing
const basePath = import.meta.env.BASE_URL || "";
const themePath = variant === 'redwhite' ? 'redwhite/' : '';
const finalHref = href.startsWith('/') ? `${basePath}${themePath}${href.slice(1)}` : href;

// Theme-aware classes using CSS variables for better theme support
const cardClasses = "group block p-6 rounded-lg transition-all hover:shadow-lg";

const categoryClasses = "inline-block px-3 py-1 mb-3 text-xs font-semibold rounded-full";

const titleClasses = "text-xl font-bold mb-2 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors";

const descriptionClasses = "line-clamp-3";

const linkClasses = "mt-4 flex items-center text-red-600 dark:text-red-400 group-hover:text-red-700 dark:group-hover:text-red-300";
---

<a
  href={finalHref}
  class={`${cardClasses} ${className}`}
  style="background-color: var(--theme-bg-card); border: 1px solid var(--theme-border); color: var(--theme-text-primary);"
>
  {image && (
    <div class="mb-4 overflow-hidden rounded-lg">
      <img
        src={image}
        alt={title}
        class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
      />
    </div>
  )}

  {category && (
    <span
      class={categoryClasses}
      style="background-color: var(--theme-tag-bg); color: var(--theme-tag-text);"
    >
      {category}
    </span>
  )}

  <h3 class={titleClasses} style="color: var(--theme-text-primary);">
    {title}
  </h3>

  <p class={descriptionClasses} style="color: var(--theme-text-secondary);">
    {description}
  </p>

  <div class={linkClasses}>
    <span class="text-sm font-medium">Learn more</span>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="0 0 24 24"
      class="ml-1 group-hover:translate-x-1 transition-transform"
    >
      <path
        fill="currentColor"
        d="M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2l10 10z"
      />
    </svg>
  </div>
</a>