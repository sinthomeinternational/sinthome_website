---
import RootLayout from "./RootLayout.astro";
import TopNavigation from "../components/layout/TopNavigation";
import Footer from "../components/layout/Footer.astro";
import WarpBackground from "../components/ui/WarpBackground";

const {
  title,
  description,
  showNavigation = true,
  useInfoLayout = false,
  useContentLayout = false,
  theme = 'dark'
} = Astro.props;
---

<RootLayout title={title} description={description} theme={theme}>
  {useContentLayout ? (
    <!-- Content-focused layout without warp animation for better readability -->
    <div class="min-h-screen" style="background-color: var(--theme-bg-primary); color: var(--theme-text-primary);">
      {showNavigation && (
        <>
          <TopNavigation variant="fixed" client:idle />
          <div class="h-16"></div> <!-- Spacer for fixed nav -->
        </>
      )}
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="[&_h1]:text-red-600 pt-8 pb-20" style="color: var(--theme-text-primary);">
          <slot />
        </div>
      </main>
      <Footer />
    </div>
  ) : useInfoLayout ? (
    <div class="flex relative gap-4 w-full max-w-screen-xl mx-auto">
      <!-- Bookmark-style warp animation -->
      <nav class="relative w-4 md:min-w-[4rem] xl:min-w-[5rem] sm:min-h-screen sm:ml-8 sm:pb-4">
        <div class="w-full h-[80vh] max-sm:w-4 md:max-w-[3rem] xl:max-w-[4rem] fixed top-[10vh] -z-10 sm:rounded-full overflow-hidden shadow-2xl">
          <WarpBackground
            speed={0.15}
            swirl={0.98}
            swirlIterations={20}
            shapeScale={0.08}
            rotation={0.55}
            scale={0.3}
            softness={0}
            client:idle
          />
        </div>
      </nav>

      <main class="relative flex-1" style="background-color: var(--theme-bg-primary); color: var(--theme-text-primary);">
        {showNavigation && (
          <>
            <TopNavigation variant="fixed" client:idle />
            <div class="h-16"></div> <!-- Spacer for fixed nav -->
          </>
        )}
        <div class="[&_h1]:text-red-600 pt-8 pb-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" style="color: var(--theme-text-primary);">
          <slot />
        </div>
        <Footer />
      </main>
    </div>
  ) : (
    <!-- Default layout with navigation and proper structure -->
    <div class="bg-black min-h-screen">
      {showNavigation && (
        <>
          <TopNavigation client:idle />
          <div class="h-16"></div> <!-- Spacer for fixed nav -->
        </>
      )}
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <slot />
      </main>
      <Footer />
    </div>
  )}
</RootLayout>