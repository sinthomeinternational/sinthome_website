---
import RedWhiteRootLayout from "./RedWhiteRootLayout.astro";
import TopNavigation from "../components/layout/TopNavigation";
import Footer from "../components/layout/Footer.astro";
import WarpBackground from "../components/ui/WarpBackground";

const {
  title,
  description,
  showNavigation = true,
  useInfoLayout = false
} = Astro.props;
---

<RedWhiteRootLayout title={title} description={description}>
  {showNavigation && !useInfoLayout && (
    <TopNavigation client:load variant="fixed" theme="redwhite" />
    <div class="h-16"></div> <!-- Spacer for fixed nav -->
  )}

  {useInfoLayout ? (
    <div class="flex relative gap-4 w-full max-w-screen-xl">
      <nav class="relative w-4 md:min-w-[18rem] xl:min-w-[24rem] sm:min-h-screen sm:ml-4 sm:pb-4">
        <div class="w-full h-full max-sm:w-4 md:max-w-[18rem] xl:max-w-[24rem] fixed -z-10 sm:bottom-4 sm:rounded-b-full overflow-hidden">
          <WarpBackground
            color1="#fca5a5"
            color2="#ef4444"
            color3="#b91c1c"
            speed={0.15}
            swirl={1.5}
            swirlIterations={10}
            shapeScale={0.3}
            client:load
          />
        </div>
      </nav>

      <main class="relative bg-white flex-1">
        {showNavigation && (
          <TopNavigation variant="static" theme="redwhite" client:load />
        )}
        <div class="[&_h1]:text-red-600 pt-8 pb-20 text-black">
          <slot />
        </div>
        <Footer />
      </main>
    </div>
  ) : (
    <main class="bg-white min-h-screen text-black">
      <div class="container mx-auto px-4 py-8 [&_h1]:text-red-600">
        <slot />
      </div>
      <Footer />
    </main>
  )}
</RedWhiteRootLayout>