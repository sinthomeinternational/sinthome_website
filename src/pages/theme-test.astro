---
import RootLayout from "../layouts/RootLayout.astro";
import TopNavigation from "../components/layout/TopNavigation";
---

<RootLayout title="Theme Test">
    <TopNavigation client:load variant="fixed" />
    <main class="pt-20 px-8">
        <div class="max-w-4xl mx-auto space-y-8">
            <h1 class="text-4xl font-bold">Theme Test Page</h1>

            <div class="p-6 rounded-lg border">
                <h2 class="text-2xl font-semibold mb-4">Current Theme</h2>
                <p class="mb-4">This page should respond to theme changes. Use the theme switcher button in the navigation.</p>

                <div class="grid grid-cols-2 gap-4">
                    <div class="p-4 bg-white text-black dark:bg-zinc-900 dark:text-white rounded">
                        <h3 class="font-semibold mb-2">Light/Dark Box</h3>
                        <p>This box changes based on theme</p>
                    </div>

                    <div class="p-4 theme-light:bg-gray-100 theme-light:text-gray-900 theme-dark:bg-zinc-800 theme-dark:text-white rounded">
                        <h3 class="font-semibold mb-2">Theme-specific Box</h3>
                        <p>Uses theme-light and theme-dark classes</p>
                    </div>
                </div>
            </div>

            <div class="p-6 rounded-lg border">
                <h2 class="text-2xl font-semibold mb-4">Test Links</h2>
                <ul class="space-y-2">
                    <li><a href="?theme=light" class="text-red-600 hover:text-red-800">Force Light Theme (URL param)</a></li>
                    <li><a href="?theme=dark" class="text-red-600 hover:text-red-800">Force Dark Theme (URL param)</a></li>
                    <li><a href="/sinthome_website/redwhite" class="text-red-600 hover:text-red-800">View RedWhite Version</a></li>
                </ul>
            </div>

            <div class="p-6 rounded-lg border">
                <h2 class="text-2xl font-semibold mb-4">Theme Classes Applied</h2>
                <div id="theme-info" class="font-mono text-sm"></div>
            </div>
        </div>
    </main>

    <script>
        // Display current theme information
        function updateThemeInfo() {
            const html = document.documentElement;
            const info = document.getElementById('theme-info');
            if (info) {
                info.innerHTML = `
                    <p>HTML classes: ${html.className || 'none'}</p>
                    <p>Data-theme: ${html.getAttribute('data-theme') || 'none'}</p>
                    <p>LocalStorage theme: ${localStorage.getItem('theme') || 'none'}</p>
                    <p>Body classes: ${document.body.className || 'none'}</p>
                `;
            }
        }

        updateThemeInfo();

        // Update when theme changes
        const observer = new MutationObserver(updateThemeInfo);
        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['class', 'data-theme']
        });
    </script>
</RootLayout>