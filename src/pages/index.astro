---
import RootLayout from "../layouts/RootLayout.astro";
import WarpBackground from "../components/ui/WarpBackground";
import ThemeLanguageSwitcher from "../components/ui/ThemeLanguageSwitcher";
import { assets } from "../lib/assets";
---

<RootLayout>
	<main class="homepage-main">
		<div id="homepage-container" class="group relative w-full h-dvh flex items-center justify-center overflow-hidden">
			<div class="absolute w-full h-dvh -z-10 overflow-hidden">
				{/* Enhanced Warp with directional movement - colors will auto-adapt to theme */}
				<WarpBackground
						speed={0.2}
						swirl={0.98}
						swirlIterations={29}
						shapeScale={0.04}
						rotation={0.55}
						scale={0.4}
						softness={0}
						distortion={0}
						client:visible
				/>
			</div>

			<div class="absolute w-full h-dvh flex flex-col justify-center items-center z-10">
				<!-- Theme and Language Switchers - Top Right -->
				<div id="switcher-buttons" class="absolute top-6 right-6 opacity-0 transition-opacity duration-500">
					<ThemeLanguageSwitcher client:load />
				</div>

				<!-- Animated Content Container -->
				<div id="hero-content" class="flex flex-col justify-center items-center text-center transition-all duration-700 ease-out w-full">
					<!-- SINTHOME - Starts Centered with responsive positioning -->
					<h1 id="sinthome-title" class="sinthome-title font-black uppercase mb-0 transition-all duration-700 ease-out sinthome-centered theme-hero-title">
						SINTHOME
					</h1>

					<!-- Initially Hidden Elements -->
					<div id="emerging-content" class="content-hidden absolute-content">
						<!-- Straightforward Tagline -->
						<p class="tagline text-xl sm:text-2xl font-semibold mb-6 mt-4 text-center theme-subtitle">
							Knowledge — Critique — Praxis
						</p>

						<!-- Plain Practice Tags -->
						<div class="tags-container flex flex-wrap justify-center gap-3 mb-10 max-w-3xl mx-auto">
							<span class="tag-item px-4 py-2 rounded-full text-sm theme-tag">
								Public Lectures
							</span>
							<span class="tag-item px-4 py-2 rounded-full text-sm theme-tag">
								Psychoanalysis
							</span>
							<span class="tag-item px-4 py-2 rounded-full text-sm theme-tag">
								Workers Assist
							</span>
							<span class="tag-item px-4 py-2 rounded-full text-sm theme-tag">
								AI for Public Good
							</span>
							<span class="tag-item px-4 py-2 rounded-full text-sm theme-tag">
								Factory AI Solution
							</span>
						</div>

						<!-- Simple, Direct CTAs -->
						<div class="buttons-container flex flex-col sm:flex-row gap-4 justify-center items-center">
							<a
								href="/who-we-are"
								class="cta-button cta-button-primary px-8 py-4 font-bold transition-colors"
							>
								ABOUT US
							</a>
							<a
								href="/what-we-do"
								class="cta-button cta-button-secondary px-8 py-4 font-bold transition-colors"
							>
								OUR PROJECTS
							</a>
							<a
								href="/contact"
								class="cta-button cta-button-tertiary px-8 py-4 font-bold transition-colors"
							>
								JOIN US
							</a>
						</div>
					</div>
				</div>

				<!-- Enhanced Scroll Indicator -->
				<div id="scroll-indicator" class="absolute bottom-8 left-1/2 transform -translate-x-1/2 opacity-100 transition-opacity duration-500">
					<div class="scroll-pulse-animation backdrop-blur-sm rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition-all duration-300 theme-scroll-indicator">
						<svg class="w-6 h-6 theme-scroll-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
						</svg>
					</div>
				</div>

				<!-- Collapse Button (hidden by default, shown when content is visible) -->
				<div id="collapse-button" class="absolute bottom-8 left-1/2 transform -translate-x-1/2 opacity-0 pointer-events-none transition-all duration-300">
					<div class="backdrop-blur-sm rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 cursor-pointer theme-scroll-indicator">
						<svg class="w-6 h-6 theme-scroll-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 11l7-7 7 7M5 19l7-7 7 7"></path>
						</svg>
					</div>
				</div>
			</div>
		</div>
	</main>
</RootLayout>

<!-- External script for homepage animations -->
<script type="module" src={assets.homepageAnimations} defer></script>

<style>
	/* CSS Variables for consistent animation timing */
	:root {
		--animation-duration-fast: 0.2s;    /* Reduced from 0.25s */
		--animation-duration-medium: 0.35s; /* Reduced from 0.45s */
		--animation-duration-slow: 0.5s;    /* Reduced from 0.65s */
		--animation-easing: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Professional ease-out curve */
		--animation-easing-entrance: cubic-bezier(0.16, 1, 0.3, 1); /* Smooth entrance */
		--animation-easing-micro: cubic-bezier(0.4, 0, 0.2, 1); /* Subtle micro-animations */
	}

	/* Keyboard focus indicator for accessibility */
	#homepage-container {
		outline: none;
	}

	#homepage-container:focus-visible {
		outline: 2px solid rgba(220, 38, 38, 0.5);
		outline-offset: -4px;
	}

	/* SINTHOME title styling - League Spartan Bold */
	.sinthome-title {
		/* League Spartan - geometric sans-serif with strong, clean lines */
		font-family: 'League Spartan', sans-serif;
		font-weight: 700; /* Bold weight */
		letter-spacing: -0.06em; /* Much tighter spacing for condensed look */
		font-size: min(18vw, 16rem); /* Smaller size, no stretching */
		line-height: 1; /* Natural line height */
		text-rendering: optimizeLegibility;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		color: var(--theme-text-primary);
		/* No horizontal compression - natural width */
		transform: scaleX(1);
		transform-origin: center;
		/* Smooth transition for title movement */
		transition: transform var(--animation-duration-medium) var(--animation-easing);
	}

	/* Center SINTHOME properly on different screen sizes */
	.sinthome-centered {
		/* Mobile: Keep towards upper part of screen */
		@apply mt-[-20vh];
	}

	/* Desktop: Perfect centering and animation states */
	@media (min-width: 768px) {
		.sinthome-centered {
			margin-top: 0;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		/* When animated, move SINTHOME up - combines with title-moved class */
		.sinthome-title.title-moved.sinthome-centered {
			transform: translate(-50%, calc(-50% - 3rem));
		}
	}

	/* Mobile title movement */
	@media (max-width: 767px) {
		.sinthome-title.title-moved {
			transform: translateY(-3rem);
		}
	}

	/* Position the emerging content properly */
	.absolute-content {
		position: absolute;
		top: 55%;
		left: 50%;
		transform: translateX(-50%);
		width: 100%;
		max-width: 64rem;
		padding: 0 1rem;
	}

	/* Mobile adjustments for emerging content */
	@media (max-width: 767px) {
		.absolute-content {
			position: static;
			transform: none;
			margin-top: 2rem;
		}
	}

	/* Prevent actual scrolling only on homepage */
	.homepage-main {
		height: 100vh;
		overflow: hidden;
	}

	/* Professional Animation System */

	/* Initial hidden state for content - desktop */
	@media (min-width: 768px) {
		.content-hidden.absolute-content {
			opacity: 0;
			transform: translateX(-50%) translateY(2rem);
			transition: opacity var(--animation-duration-slow) var(--animation-easing),
						transform var(--animation-duration-slow) var(--animation-easing);
		}

		/* Content visible state - desktop */
		.content-hidden.content-visible.absolute-content {
			opacity: 1;
			transform: translateX(-50%) translateY(0);
		}
	}

	/* Initial hidden state for content - mobile */
	@media (max-width: 767px) {
		.content-hidden {
			opacity: 0;
			transform: translateY(2rem);
			transition: opacity var(--animation-duration-slow) var(--animation-easing),
						transform var(--animation-duration-slow) var(--animation-easing);
		}

		/* Content visible state - mobile */
		.content-hidden.content-visible {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* Individual element initial states */
	.tagline,
	.tag-item,
	.cta-button {
		opacity: 0;
		transform: translateY(1.2rem) scale(0.98);
		transition: opacity var(--animation-duration-medium) var(--animation-easing-entrance),
					transform var(--animation-duration-medium) var(--animation-easing-entrance),
					scale var(--animation-duration-medium) var(--animation-easing-entrance);
	}

	/* Individual element visible states */
	.tagline.element-visible,
	.tag-item.element-visible,
	.cta-button.element-visible {
		opacity: 1;
		transform: translateY(0) scale(1);
	}

	/* Subtle hover enhancement for tags */
	.tag-item.element-visible {
		transition: opacity var(--animation-duration-medium) var(--animation-easing-entrance),
					transform var(--animation-duration-medium) var(--animation-easing-entrance),
					background-color var(--animation-duration-fast) ease,
					border-color var(--animation-duration-fast) ease;
	}

	.tag-item.element-visible:hover {
		background-color: var(--theme-bg-secondary);
		border-color: var(--theme-border-hover);
	}

	/* Professional button transitions */
	.cta-button.element-visible {
		transition: opacity var(--animation-duration-medium) var(--animation-easing-entrance),
					transform var(--animation-duration-medium) var(--animation-easing-entrance),
					background-color var(--animation-duration-fast) ease,
					color var(--animation-duration-fast) ease,
					border-color var(--animation-duration-fast) ease,
					box-shadow var(--animation-duration-fast) ease;
	}

	/* Subtle elevation on button hover */
	.cta-button.element-visible:hover {
		transform: translateY(-2px) scale(1.02);
		box-shadow: 0 6px 20px rgba(168, 0, 0, 0.2);
	}

	/* Enhanced scroll indicator with pulsing circle */
	#scroll-indicator {
		opacity: 1;
		transition: opacity 0.15s ease-out; /* Even faster fade */
	}

	#scroll-indicator.scroll-hidden {
		opacity: 0;
		pointer-events: none; /* Prevent any interaction when hidden */
	}

	/* Custom pulse animation for scroll indicator */
	@keyframes scrollPulse {
		0%, 100% {
			transform: scale(1);
			opacity: 1;
		}
		50% {
			transform: scale(1.05);
			opacity: 0.9;
		}
	}

	.scroll-pulse-animation {
		animation: scrollPulse 2s ease-in-out infinite;
	}

	/* Add hover effect for scroll indicator */
	#scroll-indicator:hover .scroll-pulse-animation {
		animation-play-state: paused;
		transform: scale(1.1);
		background-color: var(--theme-bg-secondary);
		border-color: var(--theme-border-hover);
		cursor: pointer;
	}

	/* Performance optimizations */
	.sinthome-title,
	.content-hidden,
	.tagline,
	.tag-item,
	.cta-button,
	#scroll-indicator {
		will-change: transform, opacity;
	}

	/* Ensure smooth rendering on all devices */
	* {
		-webkit-backface-visibility: hidden;
		backface-visibility: hidden;
	}

	/* Micro-animations for enhanced polish */
	@keyframes microFloat {
		0%, 100% {
			transform: translateY(0) scale(1);
		}
		50% {
			transform: translateY(-2px) scale(1.01);
		}
	}

	@keyframes microPulse {
		0% {
			transform: translateY(0) scale(1);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		}
		50% {
			transform: translateY(0) scale(1.015);
			box-shadow: 0 4px 16px rgba(168, 0, 0, 0.15);
		}
		100% {
			transform: translateY(0) scale(1);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		}
	}

	/* Apply micro-animations */
	.tag-item.micro-float {
		animation: microFloat 3s var(--animation-easing-micro) infinite;
	}

	.cta-button.micro-pulse {
		animation: microPulse 2s var(--animation-easing-micro);
		animation-fill-mode: forwards;
	}

	/* Remove will-change after animations complete to optimize performance */
	@media (prefers-reduced-motion: reduce) {
		:root {
			--animation-duration-fast: 0.1s;
			--animation-duration-medium: 0.1s;
			--animation-duration-slow: 0.1s;
		}

		/* Respect user's motion preferences */
		.sinthome-title,
		.content-hidden,
		.tagline,
		.tag-item,
		.cta-button,
		#scroll-indicator {
			transition-duration: 0.1s !important;
		}
	}

	/* Theme-aware tag and button styles */
	.theme-tag {
		border: 1px solid;
		color: var(--theme-text-primary);
		background-color: transparent;
	}

	/* Dark theme tags */
	html.theme-dark .theme-tag {
		border-color: rgba(255, 255, 255, 0.2);
	}

	html.theme-dark .theme-tag:hover {
		border-color: rgba(255, 255, 255, 0.4);
	}

	/* Light theme tags */
	html.theme-light .theme-tag {
		background-color: #7f1d1d; /* Dark burgundy background */
		color: #fecaca; /* Light pink text */
		border-color: #7f1d1d;
		box-shadow: 0 1px 3px rgba(127, 29, 29, 0.2);
	}

	html.theme-light .theme-tag:hover {
		background-color: #b91c1c; /* Bright burgundy background */
		color: #fee2e2; /* Very light pink text */
		border-color: #b91c1c;
		box-shadow: 0 2px 4px rgba(127, 29, 29, 0.3);
	}

	/* Theme-aware hero title */
	.theme-hero-title {
		color: var(--theme-text-primary);
	}

	html.theme-light .theme-hero-title {
		color: #b91c1c; /* Bright burgundy/red */
	}

	/* Theme-aware subtitle */
	.theme-subtitle {
		color: var(--theme-text-primary);
	}

	html.theme-light .theme-subtitle {
		color: #7f1d1d; /* Dark burgundy - matching tags/buttons */
	}

	/* CTA Button Variants - Primary */
	.cta-button-primary {
		border: 2px solid;
		color: var(--theme-text-primary);
	}

	html.theme-dark .cta-button-primary {
		background-color: rgba(0, 0, 0, 0.4);
		border-color: rgba(255, 255, 255, 0.4);
	}

	html.theme-dark .cta-button-primary:hover {
		background-color: rgba(255, 255, 255, 0.1);
		border-color: rgba(255, 255, 255, 0.6);
	}

	html.theme-light .cta-button-primary {
		background-color: #7f1d1d; /* Dark burgundy background */
		color: #fecaca; /* Light pink text */
		border-color: #7f1d1d;
	}

	html.theme-light .cta-button-primary:hover {
		background-color: #991b1b; /* Slightly brighter */
		color: #ffffff; /* White text */
		border-color: #991b1b;
	}

	/* CTA Button Variants - Secondary */
	.cta-button-secondary {
		border: 2px solid;
		color: var(--theme-text-primary);
	}

	html.theme-dark .cta-button-secondary {
		background-color: rgba(0, 0, 0, 0.2);
		border-color: rgba(255, 255, 255, 0.4);
	}

	html.theme-dark .cta-button-secondary:hover {
		background-color: #dc2626;
		color: white;
		border-color: #dc2626;
	}

	html.theme-light .cta-button-secondary {
		background-color: #fecaca; /* Solid light pink background */
		color: #7f1d1d; /* Dark burgundy text */
		border-color: #7f1d1d;
	}

	html.theme-light .cta-button-secondary:hover {
		background-color: #7f1d1d; /* Dark burgundy background */
		color: #fecaca; /* Light pink text */
		border-color: #7f1d1d;
	}

	/* CTA Button Variants - Tertiary */
	.cta-button-tertiary {
		border: 2px solid;
		color: var(--theme-text-primary);
	}

	html.theme-dark .cta-button-tertiary {
		border-color: rgba(255, 255, 255, 0.4);
		background-color: transparent;
	}

	html.theme-dark .cta-button-tertiary:hover {
		background-color: #dc2626;
		color: white;
		border-color: #dc2626;
	}

	html.theme-light .cta-button-tertiary {
		background-color: transparent; /* Transparent background */
		color: #7f1d1d; /* Dark burgundy text */
		border-color: #7f1d1d;
	}

	html.theme-light .cta-button-tertiary:hover {
		background-color: #7f1d1d; /* Dark burgundy background */
		color: #fecaca; /* Light pink text */
		border-color: #7f1d1d;
	}

	/* Scroll indicator styling */
	.theme-scroll-indicator {
		background-color: var(--theme-bg-card);
		border: 1px solid var(--theme-border);
	}

	html.theme-light .theme-scroll-indicator {
		background-color: #fecaca; /* Light pink background */
		border-color: #7f1d1d; /* Dark burgundy border */
	}

	.theme-scroll-arrow {
		color: var(--theme-text-secondary);
	}

	html.theme-light .theme-scroll-arrow {
		color: #7f1d1d; /* Dark burgundy arrow */
	}
</style>