---
import PageLayout from "../layouts/PageLayout.astro";
import H1 from "../components/ui/H1.astro";
import { getTranslations, getCurrentLang } from "../lib/translations";

// Get current language and translations
const lang = getCurrentLang();
const t = getTranslations(lang);
const pageContent = t.pages.whoWeAre;
---

<PageLayout title={`${pageContent.title} - Sinthome`} useInfoLayout={true}>
    <H1>{pageContent.title}</H1>

    {pageContent.subtitle && (
      <p class="text-xl text-gray-600 dark:text-zinc-400 mb-8 max-w-4xl">
        {pageContent.subtitle}
      </p>
    )}

    <div class="space-y-12 text-gray-700 dark:text-zinc-300 max-w-4xl">
      {pageContent.sections?.map((section) => (
        <section>
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
            {section.title}
          </h2>

          {/* Handle content as string or array */}
          {section.content && (
            Array.isArray(section.content) ? (
              section.content.map((paragraph) => (
                <p class="leading-relaxed mb-4">
                  {paragraph}
                </p>
              ))
            ) : (
              <p class="leading-relaxed mb-4">{section.content}</p>
            )
          )}

          {/* Handle items if present */}
          {section.items && section.items.length > 0 && (
            <div class="space-y-4 mt-4">
              {section.items.map((item: any) => (
                <div class="bg-white dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800 rounded-lg p-6">
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                    {item.name || item.title}
                  </h3>
                  <p class="text-gray-600 dark:text-zinc-400">
                    {item.description}
                  </p>
                </div>
              ))}
            </div>
          )}
        </section>
      ))}

      {/* Call to Action Section */}
      {pageContent.callToAction && (
        <section class="mt-12 p-8 bg-white dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800 rounded-lg text-center">
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
            {pageContent.callToAction.title}
          </h2>
          <p class="text-gray-600 dark:text-zinc-300 mb-6">
            {pageContent.callToAction.description}
          </p>
          <div class="flex flex-wrap gap-4 justify-center">
            {pageContent.callToAction.buttons && (
              <>
                <a
                  href="/donate"
                  class="px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
                >
                  {pageContent.callToAction.buttons.donate}
                </a>
                <a
                  href="/contact"
                  class="px-6 py-3 bg-gray-200 dark:bg-zinc-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-700 transition-colors"
                >
                  {pageContent.callToAction.buttons.getInvolved}
                </a>
              </>
            )}
          </div>
        </section>
      )}
    </div>
</PageLayout>