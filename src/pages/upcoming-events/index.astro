---
import RootLayout from "../../layouts/RootLayout.astro";
import InfoLayout from "../../layouts/InfoLayout.astro";
import H1 from "../../components/ui/H1.astro";
import { getTranslations, getCurrentLang } from "../../lib/translations";

// Get current language and translations
const lang = getCurrentLang();
const t = getTranslations(lang);
const pageContent = t.pages.upcomingEvents;

// Get events data
const events = [
  { key: 'srtp', data: pageContent.events.srtp },
  { key: 'onlineCommunity', data: pageContent.events.onlineCommunity },
  { key: 'nyMedia', data: pageContent.events.nyMedia },
  { key: 'hackathon', data: pageContent.events.hackathon },
  { key: 'eslClass', data: pageContent.events.eslClass },
];
---

<RootLayout>
  <InfoLayout>
    <H1>{pageContent.title}</H1>

    <div class="space-y-8 max-w-4xl">
      {events.map(({ key, data }) => (
        <section key={key}>
          <div class="bg-white dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800 rounded-lg p-6">
            <div class="flex items-center gap-3 mb-4">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{data.title}</h2>
              {data.tags.map((tag, index) => (
                <span
                  key={index}
                  class={`text-xs px-2 py-1 rounded ${
                    index === 0
                      ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'
                      : 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 ml-auto'
                  }`}
                >
                  {tag}
                </span>
              ))}
            </div>

            <div class="grid md:grid-cols-4 gap-4 mb-4">
              <div class="bg-gray-50 dark:bg-zinc-800/50 rounded-lg p-4">
                <h3 class="text-blue-600 dark:text-blue-400 text-xs uppercase tracking-wide font-semibold mb-2">
                  {pageContent.labels.location}
                </h3>
                <p class="text-gray-700 dark:text-zinc-300">{data.location}</p>
              </div>
              <div class="bg-gray-50 dark:bg-zinc-800/50 rounded-lg p-4">
                <h3 class="text-blue-600 dark:text-blue-400 text-xs uppercase tracking-wide font-semibold mb-2">
                  {pageContent.labels.schedule}
                </h3>
                <p class="text-gray-700 dark:text-zinc-300">
                  {data.schedule}
                  {data.scheduleFull && <><br/>{data.scheduleFull}</>}
                </p>
              </div>
              <div class="bg-gray-50 dark:bg-zinc-800/50 rounded-lg p-4">
                <h3 class="text-blue-600 dark:text-blue-400 text-xs uppercase tracking-wide font-semibold mb-2">
                  {pageContent.labels.format}
                </h3>
                <p class="text-gray-700 dark:text-zinc-300">{data.format}</p>
              </div>
              <div class="bg-gray-50 dark:bg-zinc-800/50 rounded-lg p-4">
                <h3 class="text-blue-600 dark:text-blue-400 text-xs uppercase tracking-wide font-semibold mb-2">
                  {pageContent.labels.type}
                </h3>
                <p class="text-gray-700 dark:text-zinc-300">{data.type}</p>
              </div>
            </div>

            <div class="border-t border-gray-200 dark:border-zinc-700 pt-4">
              <h3 class="text-gray-900 dark:text-white font-semibold mb-3">{data.aboutTitle}</h3>
              <p class="text-gray-600 dark:text-zinc-300 leading-relaxed">
                {data.description}
              </p>
            </div>
          </div>
        </section>
      ))}
    </div>
  </InfoLayout>
</RootLayout>